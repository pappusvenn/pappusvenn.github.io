<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Dave's Superior Flight Search</title>
  <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="main.css"/>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA2hkwSclaKkxutpMtFGtsJfEXajcoSmls"></script>
  <!-- Javascript to establish the datepicker -->
  <script>
     $(function() {
        $( "#datepicker-1" ).datepicker({dateFormat: "yy-mm-dd"});
     });
  </script>
</head>
 
<body>
 <h1>Dave's Superior Flight Search</h1>
 <p>Origin Address (Street, City, State): <input type="text" id="originadd"><span id=ogapts></span></p>
 <p>Destination Address (Street, City, State): <input type="text" id="destadd"><span id=endapts></span></p>
 <p>Departure Date: <input type="text" id="datepicker-1"></p>
 <p>Carry-on bag?<select id="carryonbox"><option value="0">No</option> <option value="1">Yes</option></select>     
 Checked bags: <select id="checkedbox"><option value="0">0</option> <option value="1">1</option> <option value="2">2</option></select></p>
 <p><input type="button" id="compare-flights" value="Search"></p>
 <div id="supercool"></div>

 
  <script>
 var responsestring = '[{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":297.6,"flightprice":161.6,"duration":556,"layovers":1,"airlinename":"Spirit Airlines","flights":"NK 847,NK 209","departdate":"2016-09-29","departtime":"09:50","arrvdate":"2016-09-29","arrvtime":"16:06","carryonfee":26,"checkedfee":52},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":322.6,"flightprice":187.1,"duration":548,"layovers":0,"airlinename":"United Airlines","flights":"UA 1456","departdate":"2016-09-29","departtime":"07:29","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":322.6,"flightprice":187.1,"duration":457,"layovers":0,"airlinename":"United Airlines","flights":"UA 761","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"10:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":501,"layovers":1,"airlinename":"United Airlines","flights":"UA 561,UA 721","departdate":"2016-09-29","departtime":"07:49","arrvdate":"2016-09-29","arrvtime":"13:10","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":497,"layovers":1,"airlinename":"United Airlines","flights":"UA 463,UA 499","departdate":"2016-09-29","departtime":"08:00","arrvdate":"2016-09-29","arrvtime":"13:17","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":516,"layovers":1,"airlinename":"United Airlines","flights":"UA 628,UA 1891","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"12:36","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":521,"layovers":1,"airlinename":"United Airlines","flights":"UA 1888,UA 810","departdate":"2016-09-29","departtime":"10:05","arrvdate":"2016-09-29","arrvtime":"15:46","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":496,"layovers":1,"airlinename":"United Airlines","flights":"UA 343,UA 268","departdate":"2016-09-29","departtime":"06:25","arrvdate":"2016-09-29","arrvtime":"11:41","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":511,"layovers":1,"airlinename":"United Airlines","flights":"UA 761,UA 769","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"11:31","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":517,"layovers":1,"airlinename":"United Airlines","flights":"UA 657,UA 937","departdate":"2016-09-29","departtime":"05:45","arrvdate":"2016-09-29","arrvtime":"11:22","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SFO","leavinguber":38.5,"arrivinguber":37,"totalcost":327.1,"flightprice":191.6,"duration":451,"layovers":1,"airlinename":"United Airlines","flights":"UA 628,UA 769","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"11:31","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":328.6,"flightprice":156.6,"duration":607,"layovers":1,"airlinename":"United Airlines","flights":"UA 1285,UA 245","departdate":"2016-09-29","departtime":"06:30","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":334.6,"flightprice":206.6,"duration":467,"layovers":1,"airlinename":"United Airlines","flights":"UA 744,UA 245","departdate":"2016-09-29","departtime":"08:50","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":334.6,"flightprice":206.6,"duration":504,"layovers":1,"airlinename":"United Airlines","flights":"UA 657,UA 1957","departdate":"2016-09-29","departtime":"05:45","arrvdate":"2016-09-29","arrvtime":"11:09","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":334.6,"flightprice":206.6,"duration":612,"layovers":1,"airlinename":"United Airlines","flights":"UA 343,UA 245","departdate":"2016-09-29","departtime":"06:25","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":334.6,"flightprice":206.6,"duration":528,"layovers":1,"airlinename":"United Airlines","flights":"UA 561,UA 245","departdate":"2016-09-29","departtime":"07:49","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":334.6,"flightprice":206.6,"duration":653,"layovers":1,"airlinename":"United Airlines","flights":"UA 744,UA 2025","departdate":"2016-09-29","departtime":"08:50","arrvdate":"2016-09-29","arrvtime":"16:43","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":357.6,"flightprice":229.6,"duration":637,"layovers":1,"airlinename":"United Airlines","flights":"UA 761,UA 245","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":362.6,"flightprice":183.1,"duration":370,"layovers":0,"airlinename":"United Airlines","flights":"UA 1483","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"09:10","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":386.6,"flightprice":258.6,"duration":618,"layovers":1,"airlinename":"United Airlines","flights":"UA 1805,UA 890","departdate":"2016-09-29","departtime":"13:55","arrvdate":"2016-09-29","arrvtime":"21:13","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":401.6,"flightprice":265.6,"duration":567,"layovers":1,"airlinename":"Spirit Airlines","flights":"NK 922,NK 711","departdate":"2016-09-29","departtime":"16:59","arrvdate":"2016-09-29","arrvtime":"23:26","carryonfee":26,"checkedfee":52},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":417.61,"flightprice":250.61,"duration":670,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 2380,B6 471","departdate":"2016-09-29","departtime":"12:55","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":420.11,"flightprice":273.61,"duration":726,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 411,B6 1179,B6 448","departdate":"2016-09-29","departtime":"11:30","arrvdate":"2016-09-29","arrvtime":"20:36","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":420.11,"flightprice":273.61,"duration":726,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 411,B6 879,B6 448","departdate":"2016-09-29","departtime":"11:30","arrvdate":"2016-09-29","arrvtime":"20:36","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":420.11,"flightprice":273.61,"duration":726,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 411,B6 379,B6 448","departdate":"2016-09-29","departtime":"11:30","arrvdate":"2016-09-29","arrvtime":"20:36","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":433.6,"flightprice":277.1,"duration":384,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 669","departdate":"2016-09-29","departtime":"18:54","arrvdate":"2016-09-29","arrvtime":"22:18","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":436.1,"flightprice":277.1,"duration":378,"layovers":0,"airlinename":"Alaska Airlines","flights":"AS 6253","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"10:18","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":436.1,"flightprice":277.1,"duration":370,"layovers":0,"airlinename":"Virgin America","flights":"VX 23","departdate":"2016-09-29","departtime":"10:30","arrvdate":"2016-09-29","arrvtime":"13:40","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":436.1,"flightprice":277.1,"duration":377,"layovers":0,"airlinename":"Alaska Airlines","flights":"AS 6301","departdate":"2016-09-29","departtime":"08:15","arrvdate":"2016-09-29","arrvtime":"11:32","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":439.59,"flightprice":293.09,"duration":385,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 167","departdate":"2016-09-29","departtime":"20:34","arrvdate":"2016-09-29","arrvtime":"23:59","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":440.1,"flightprice":281.1,"duration":470,"layovers":0,"airlinename":"Virgin America","flights":"VX 251","departdate":"2016-09-29","departtime":"09:35","arrvdate":"2016-09-29","arrvtime":"14:25","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":441.1,"flightprice":277.1,"duration":382,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 615","departdate":"2016-09-29","departtime":"11:45","arrvdate":"2016-09-29","arrvtime":"15:07","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":441.1,"flightprice":277.1,"duration":380,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 15","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"10:20","carryonfee":0,"checkedfee":55},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":446.6,"flightprice":277.1,"duration":360,"layovers":0,"airlinename":"Virgin America","flights":"VX 187","departdate":"2016-09-29","departtime":"10:30","arrvdate":"2016-09-29","arrvtime":"13:30","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":446.6,"flightprice":277.1,"duration":360,"layovers":0,"airlinename":"Virgin America","flights":"VX 183","departdate":"2016-09-29","departtime":"07:30","arrvdate":"2016-09-29","arrvtime":"10:30","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":452.11,"flightprice":295.61,"duration":636,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 18,B6 471","departdate":"2016-09-29","departtime":"13:29","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":454.1,"flightprice":302.6,"duration":644,"layovers":1,"airlinename":"Alaska Airlines","flights":"AS 7,AS 326","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"14:59","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":358,"layovers":0,"airlinename":"United Airlines","flights":"UA 2022","departdate":"2016-09-29","departtime":"06:30","arrvdate":"2016-09-29","arrvtime":"09:28","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":369,"layovers":0,"airlinename":"United Airlines","flights":"UA 1978","departdate":"2016-09-29","departtime":"13:25","arrvdate":"2016-09-29","arrvtime":"16:34","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":373,"layovers":0,"airlinename":"United Airlines","flights":"UA 1920","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"10:13","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":367,"layovers":0,"airlinename":"United Airlines","flights":"UA 454","departdate":"2016-09-29","departtime":"07:30","arrvdate":"2016-09-29","arrvtime":"10:37","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":367,"layovers":0,"airlinename":"United Airlines","flights":"UA 497","departdate":"2016-09-29","departtime":"08:25","arrvdate":"2016-09-29","arrvtime":"11:32","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":375,"layovers":0,"airlinename":"United Airlines","flights":"UA 1991","departdate":"2016-09-29","departtime":"10:01","arrvdate":"2016-09-29","arrvtime":"13:16","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SFO","leavinguber":82.5,"arrivinguber":37,"totalcost":456.6,"flightprice":277.1,"duration":367,"layovers":0,"airlinename":"United Airlines","flights":"UA 637","departdate":"2016-09-29","departtime":"09:00","arrvdate":"2016-09-29","arrvtime":"12:07","carryonfee":0,"checkedfee":60},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":458.1,"flightprice":306.6,"duration":830,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 7,AS 2009,AS 402","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"18:05","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":458.1,"flightprice":306.6,"duration":830,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 7,AS 2181,AS 402","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"18:05","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":462.1,"flightprice":315.6,"duration":482,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 213,B6 248","departdate":"2016-09-29","departtime":"07:50","arrvdate":"2016-09-29","arrvtime":"12:52","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":462.1,"flightprice":315.6,"duration":665,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 213,B6 348","departdate":"2016-09-29","departtime":"07:50","arrvdate":"2016-09-29","arrvtime":"15:55","carryonfee":0,"checkedfee":55},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":477.6,"flightprice":315.6,"duration":659,"layovers":1,"airlinename":"Alaska Airlines","flights":"AS 17,AS 326","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"14:59","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":478.1,"flightprice":314.1,"duration":391,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 915","departdate":"2016-09-29","departtime":"15:55","arrvdate":"2016-09-29","arrvtime":"19:26","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":478.1,"flightprice":314.1,"duration":393,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 1415","departdate":"2016-09-29","departtime":"18:00","arrvdate":"2016-09-29","arrvtime":"21:33","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":478.1,"flightprice":314.1,"duration":388,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 415","departdate":"2016-09-29","departtime":"09:00","arrvdate":"2016-09-29","arrvtime":"12:28","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SFO","leavinguber":72,"arrivinguber":37,"totalcost":478.1,"flightprice":314.1,"duration":381,"layovers":0,"airlinename":"JetBlue Airways","flights":"B6 1715","departdate":"2016-09-29","departtime":"21:25","arrvdate":"2016-09-30","arrvtime":"00:46","carryonfee":0,"checkedfee":55},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":482.61,"flightprice":315.61,"duration":580,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 2480,B6 471","departdate":"2016-09-29","departtime":"14:25","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":484.11,"flightprice":337.61,"duration":715,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 15,B6 1435,B6 348","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"15:55","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":487.1,"flightprice":335.6,"duration":830,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 7,AS 2471,AS 402","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"18:05","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":487.6,"flightprice":315.6,"duration":532,"layovers":1,"airlinename":"United Airlines","flights":"UA 1591,UA 748","departdate":"2016-09-29","departtime":"14:35","arrvdate":"2016-09-29","arrvtime":"20:27","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":487.6,"flightprice":315.6,"duration":608,"layovers":1,"airlinename":"United Airlines","flights":"UA 1534,UA 890","departdate":"2016-09-29","departtime":"14:05","arrvdate":"2016-09-29","arrvtime":"21:13","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":487.6,"flightprice":315.6,"duration":524,"layovers":1,"airlinename":"United Airlines","flights":"UA 687,UA 890","departdate":"2016-09-29","departtime":"15:29","arrvdate":"2016-09-29","arrvtime":"21:13","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":487.6,"flightprice":315.6,"duration":438,"layovers":1,"airlinename":"United Airlines","flights":"UA 523,UA 2025","departdate":"2016-09-29","departtime":"12:25","arrvdate":"2016-09-29","arrvtime":"16:43","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":487.6,"flightprice":315.6,"duration":544,"layovers":1,"airlinename":"United Airlines","flights":"UA 1161,UA 1957","departdate":"2016-09-29","departtime":"05:05","arrvdate":"2016-09-29","arrvtime":"11:09","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"SJC","leavinguber":82.5,"arrivinguber":29.5,"totalcost":491.6,"flightprice":319.6,"duration":637,"layovers":1,"airlinename":"United Airlines","flights":"UA 2001,UA 245","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":510.1,"flightprice":353.6,"duration":546,"layovers":1,"airlinename":"JetBlue Airways","flights":"B6 118,B6 471","departdate":"2016-09-29","departtime":"14:59","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":519.1,"flightprice":367.6,"duration":666,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 7,AS 2015,AS 3496","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"15:21","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":526.6,"flightprice":374.6,"duration":879,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 17,AS 2471,AS 2563","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":526.6,"flightprice":374.6,"duration":879,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 17,AS 2009,AS 2563","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":526.6,"flightprice":374.6,"duration":879,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 17,AS 2043,AS 2563","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":50},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":526.6,"flightprice":374.6,"duration":879,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 17,AS 2015,AS 2563","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":50},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":532.11,"flightprice":375.61,"duration":702,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 1407,B6 156,B6 471","departdate":"2016-09-29","departtime":"12:23","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":536.6,"flightprice":418.6,"duration":819,"layovers":2,"airlinename":"United Airlines","flights":"UA 463,UA 549,AS 2563","departdate":"2016-09-29","departtime":"08:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":536.6,"flightprice":418.6,"duration":759,"layovers":2,"airlinename":"United Airlines","flights":"UA 519,UA 549,AS 2563","departdate":"2016-09-29","departtime":"09:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":536.6,"flightprice":418.6,"duration":914,"layovers":2,"airlinename":"United Airlines","flights":"UA 343,UA 276,AS 2563","departdate":"2016-09-29","departtime":"06:25","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":536.6,"flightprice":418.6,"duration":830,"layovers":2,"airlinename":"United Airlines","flights":"UA 561,UA 276,AS 2563","departdate":"2016-09-29","departtime":"07:49","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":536.6,"flightprice":418.6,"duration":879,"layovers":2,"airlinename":"United Airlines","flights":"UA 628,UA 549,AS 2563","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":538.6,"flightprice":420.6,"duration":785,"layovers":2,"airlinename":"United Airlines","flights":"UA 1550,UA 1641,AS 3486","departdate":"2016-09-29","departtime":"13:15","arrvdate":"2016-09-29","arrvtime":"23:20","carryonfee":0,"checkedfee":60},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":538.6,"flightprice":420.6,"duration":826,"layovers":2,"airlinename":"United Airlines","flights":"UA 1630,UA 1641,AS 3486","departdate":"2016-09-29","departtime":"12:34","arrvdate":"2016-09-29","arrvtime":"23:20","carryonfee":0,"checkedfee":60},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":543.1,"flightprice":401.6,"duration":864,"layovers":2,"airlinename":"Alaska Airlines","flights":"AS 7,AS 2009,AS 2563","departdate":"2016-09-29","departtime":"07:15","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":50},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":551.6,"flightprice":423.6,"duration":637,"layovers":2,"airlinename":"United Airlines","flights":"UA 761,UA 605,UA 245","departdate":"2016-09-29","departtime":"06:00","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"JFK","arrivingairport":"SJC","leavinguber":72,"arrivinguber":29.5,"totalcost":553.12,"flightprice":396.62,"duration":749,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 2602,B6 1216,B6 471","departdate":"2016-09-29","departtime":"11:36","arrvdate":"2016-09-29","arrvtime":"21:05","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":567.11,"flightprice":420.61,"duration":734,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 211,B6 2079,B6 348","departdate":"2016-09-29","departtime":"06:41","arrvdate":"2016-09-29","arrvtime":"15:55","carryonfee":0,"checkedfee":55},{"leavingairport":"JFK","arrivingairport":"OAK","leavinguber":72,"arrivinguber":19.5,"totalcost":567.11,"flightprice":420.61,"duration":734,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 211,B6 279,B6 348","departdate":"2016-09-29","departtime":"06:41","arrvdate":"2016-09-29","arrvtime":"15:55","carryonfee":0,"checkedfee":55},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":582.6,"flightprice":454.6,"duration":577,"layovers":2,"airlinename":"United Airlines","flights":"UA 628,UA 605,UA 245","departdate":"2016-09-29","departtime":"07:00","arrvdate":"2016-09-29","arrvtime":"13:37","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":592.5899999999999,"flightprice":435.59,"duration":844,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 2380,B6 17,B6 167","departdate":"2016-09-29","departtime":"12:55","arrvdate":"2016-09-29","arrvtime":"23:59","carryonfee":0,"checkedfee":55},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":592.5899999999999,"flightprice":435.59,"duration":953,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 2280,B6 17,B6 167","departdate":"2016-09-29","departtime":"11:06","arrvdate":"2016-09-29","arrvtime":"23:59","carryonfee":0,"checkedfee":55},{"leavingairport":"LGA","arrivingairport":"OAK","leavinguber":38.5,"arrivinguber":19.5,"totalcost":607.6,"flightprice":489.6,"duration":727,"layovers":2,"airlinename":"United Airlines","flights":"UA 744,UA 339,AS 340","departdate":"2016-09-29","departtime":"08:50","arrvdate":"2016-09-29","arrvtime":"17:57","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":653.6,"flightprice":491.6,"duration":819,"layovers":2,"airlinename":"United Airlines","flights":"UA 977,UA 549,AS 2563","departdate":"2016-09-29","departtime":"08:00","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":653.6,"flightprice":491.6,"duration":754,"layovers":2,"airlinename":"United Airlines","flights":"UA 312,UA 549,AS 2563","departdate":"2016-09-29","departtime":"09:05","arrvdate":"2016-09-29","arrvtime":"18:39","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":662.61,"flightprice":505.61,"duration":844,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 2380,B6 1317,B6 167","departdate":"2016-09-29","departtime":"12:55","arrvdate":"2016-09-29","arrvtime":"23:59","carryonfee":0,"checkedfee":55},{"leavingairport":"LGA","arrivingairport":"SJC","leavinguber":38.5,"arrivinguber":29.5,"totalcost":695.6,"flightprice":567.6,"duration":454,"layovers":1,"airlinename":"United Airlines","flights":"UA 405,UA 2025","departdate":"2016-09-29","departtime":"12:09","arrvdate":"2016-09-29","arrvtime":"16:43","carryonfee":0,"checkedfee":60},{"leavingairport":"EWR","arrivingairport":"OAK","leavinguber":82.5,"arrivinguber":19.5,"totalcost":797.61,"flightprice":640.61,"duration":754,"layovers":2,"airlinename":"JetBlue Airways","flights":"B6 2480,B6 1317,B6 167","departdate":"2016-09-29","departtime":"14:25","arrvdate":"2016-09-29","arrvtime":"23:59","carryonfee":0,"checkedfee":55}]'
 var obj = JSON.parse(responsestring);
 var out = "<table><tr><th>Total Cost</th><th>Depart</th><th>Arrive</th><th>Airports</th><th>Flight(s)</th><th>Flight Price</th><th>Bag Fees</th><th>Uber to Airport</th><th>Uber from Airport</th></tr><tr><td>";
 var newcol = "</td><td>";
 var newrow = "</td></tr><tr><td>";
 for (var i=0; i<obj.length; i++){
    out+= "$" + obj[i].totalcost.toFixed(2) + newcol + obj[i].departtime + newcol + obj[i].arrvtime + newcol + obj[i].leavingairport + "-" + obj[i].arrivingairport + newcol + obj[i].flights + newcol + "$" + obj[i].flightprice.toFixed(2) + newcol + "$" + (obj[i].carryonfee + obj[i].checkedfee).toFixed(2) + newcol + "$" + obj[i].leavinguber.toFixed(2) + newcol + "$" + obj[i].arrivinguber.toFixed(2) + newrow;  
 }
 out += "</table>"
 document.getElementById('supercool').innerHTML = out;
 
 /*var airlinestring = '[{ "code": "AS", "name": "Alaska Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 25 }, { "code": "G4", "name": "Allegiant Air", "carryon": 15, "firstcheck": 20, "secondcheck": 20 }, { "code": "AA", "name": "American Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "DL", "name": "Delta Air Lines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "F9", "name": "Frontier Airlines", "carryon": 35, "firstcheck": 30, "secondcheck": 40 }, { "code": "HA", "name": "Hawaiian Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "B6", "name": "JetBlue Airways", "carryon": 0, "firstcheck": 20, "secondcheck": 35 }, { "code": "WN", "name": "Southwest Airlines", "carryon": 0, "firstcheck": 0, "secondcheck": 0 }, { "code": "NK", "name": "Spirit Airlines", "carryon": 26, "firstcheck": 21, "secondcheck": 31 }, { "code": "SY", "name": "Sun Country Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "UA", "name": "United Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "VX", "name": "Virgin America", "carryon": 0, "firstcheck": 25, "secondcheck": 25 }]';
  
 document.getElementById('compare-flights').addEventListener('click',function(){
         document.getElementById('supercool').innerHTML = "Searching now. This will take about a minute, so just chill for a bit..."
         searchandcompare();
    });
    
function loadjson() {
  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
  xobj.open('GET', 'airports.json', false); 
  var aeroportos = "What the fuck?";
  xobj.onreadystatechange = function () {
  if (xobj.readyState == 4 && xobj.status == "200") {
    aeroportos = xobj.responseText;}
  };
    xobj.send(null);
    return aeroportos;
}

function searchandcompare(){
   var airports = JSON.parse(loadjson());//works because we made loadjson a synchronous request. so this must happen first.
   var airlinestring = '[{ "code": "AS", "name": "Alaska Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 25 }, { "code": "G4", "name": "Allegiant Air", "carryon": 15, "firstcheck": 20, "secondcheck": 20 }, { "code": "AA", "name": "American Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "DL", "name": "Delta Air Lines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "F9", "name": "Frontier Airlines", "carryon": 35, "firstcheck": 30, "secondcheck": 40 }, { "code": "HA", "name": "Hawaiian Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "B6", "name": "JetBlue Airways", "carryon": 0, "firstcheck": 20, "secondcheck": 35 }, { "code": "WN", "name": "Southwest Airlines", "carryon": 0, "firstcheck": 0, "secondcheck": 0 }, { "code": "NK", "name": "Spirit Airlines", "carryon": 26, "firstcheck": 21, "secondcheck": 31 }, { "code": "SY", "name": "Sun Country Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "UA", "name": "United Airlines", "carryon": 0, "firstcheck": 25, "secondcheck": 35 }, { "code": "VX", "name": "Virgin America", "carryon": 0, "firstcheck": 25, "secondcheck": 25 }]'
   var airlines = JSON.parse(airlinestring); //instead of doing the loadjson() for the airline info, we do it here to speed things up
   var origin = document.getElementById('originadd').value;
   var destination = document.getElementById('destadd').value;
   var date = document.getElementById('datepicker-1').value;
   var carryons = Number(document.getElementById('carryonbox').value);
   var checked = Number(document.getElementById('checkedbox').value);
   var originairports = [];
   var destinationairports = [];
   var okwecheck = "  Checked these airports: ";
   var oaptstring = "";
   var destaptstring = "";
   var flightoptions = {};
   flightoptions.routes = [];
   var currentsize;
   var geocoder = new google.maps.Geocoder();
   geocoder.geocode( { 'address': origin}, function(results, status) {
   if (status == 'OK') {
        var originlat = results[0].geometry.location.lat();
        var originlng = results[0].geometry.location.lng();
        var j;
        originairports = findairports(originlat,originlng,airports);
        for (j=0; j<originairports.length; j++) {
           oaptstring += originairports[j].code + ", ";
           originairports[j].uberest = ubercost(originlat,originlng,originairports[j].lat,originairports[j].lng);
           console.log(originairports[j].uberest);
        }
        document.getElementById('ogapts').innerHTML = okwecheck + oaptstring;
        //OK now that we have the origin airports, we need to do the same thing for the destination airports.  
        //Need to nest b/c it's asynchronous
        geocoder.geocode( { 'address': destination}, function(results2, status2) {
        if (status2 == 'OK') {
             var destinationlat = results2[0].geometry.location.lat();
             var destinationlng = results2[0].geometry.location.lng();
             var x;
             destinationairports = findairports(destinationlat,destinationlng,airports);
             for (x=0; x<destinationairports.length; x++) {
                destaptstring += destinationairports[x].code + ", ";
                destinationairports[x].uberest = ubercost(destinationlat,destinationlng,destinationairports[x].lat,destinationairports[x].lng);
                console.log(destinationairports[x].uberest);
             }
             document.getElementById('endapts').innerHTML = okwecheck + destaptstring;   
                //Now we do the flight searches and add in the uber costs that we found before to the array of objects
                for (var y = 0; y < originairports.length; y++){
                   for (var z = 0; z < destinationairports.length; z++){
                       flightoptions.routes.push(flightsearch(originairports[y].code, destinationairports[z].code, date));
                       currentsize = flightoptions.routes.length;
                       flightoptions.routes[(currentsize-1)].deptuber = originairports[y].uberest;
                       flightoptions.routes[(currentsize-1)].arrvuber = destinationairports[z].uberest; 
                   }
                }
                for (var g = 0; g < flightoptions.routes.length; g++){
                  for (var m = 0; m< flightoptions.routes[g].opt.length; m++){
                       var tmp = flightoptions.routes[g].opt[m].flights[0].split(" ");
                       for (var h = 0; h < airlines.length; h++){
                          if (airlines[h].code == tmp[0]) {
                             flightoptions.routes[g].opt[m].carryonfee = airlines[h].carryon * carryons;
                             flightoptions.routes[g].opt[m].airlinename = airlines[h].name;
                             if (checked == 0){
                               flightoptions.routes[g].opt[m].checkedfee = 0;
                             } else if (checked == 1){
                               flightoptions.routes[g].opt[m].checkedfee = airlines[h].firstcheck;
                             } else if (checked == 2){
                               flightoptions.routes[g].opt[m].checkedfee = airlines[h].firstcheck + airlines[h].secondcheck;
                             }
                          }   
                      }
                    flightoptions.routes[g].opt[m].totalTripCost = flightoptions.routes[g].deptuber + flightoptions.routes[g].arrvuber + flightoptions.routes[g].opt[m].price + flightoptions.routes[g].opt[m].carryonfee + flightoptions.routes[g].opt[m].checkedfee;  
                  }
                }
                //Now let's roll up the data into one array
                var rolluparray = [];
                var rollupindex = 0;
                  for (var d = 0; d< flightoptions.routes.length; d++){
                      for (var e = 0; e<flightoptions.routes[d].opt.length; e++){
                          rolluparray[rollupindex] = {};
                          rolluparray[rollupindex].leavingairport = flightoptions.routes[d].dept;
                          rolluparray[rollupindex].arrivingairport = flightoptions.routes[d].arrv;
                          rolluparray[rollupindex].leavinguber = flightoptions.routes[d].deptuber;
                          rolluparray[rollupindex].arrivinguber = flightoptions.routes[d].arrvuber;
                          rolluparray[rollupindex].totalcost = flightoptions.routes[d].opt[e].totalTripCost;
                          rolluparray[rollupindex].flightprice = flightoptions.routes[d].opt[e].price;
                          rolluparray[rollupindex].duration = flightoptions.routes[d].opt[e].duration;
                          rolluparray[rollupindex].layovers = flightoptions.routes[d].opt[e].layovers;
                          rolluparray[rollupindex].airlinename = flightoptions.routes[d].opt[e].airlinename;
                          rolluparray[rollupindex].flights = flightoptions.routes[d].opt[e].flights.toString();
                          var departsplit = flightoptions.routes[d].opt[e].depart.split("T");
                          rolluparray[rollupindex].departdate = departsplit[0];
                          var departsplit2 = departsplit[1].split("-");
                          rolluparray[rollupindex].departtime = departsplit2[0];
                          var arrvsplit = flightoptions.routes[d].opt[e].arrive.split("T");
                          rolluparray[rollupindex].arrvdate = arrvsplit[0];
                          var arrvsplit2 = arrvsplit[1].split("-");
                          rolluparray[rollupindex].arrvtime = arrvsplit2[0]; 
                          rolluparray[rollupindex].carryonfee = flightoptions.routes[d].opt[e].carryonfee;
                          rolluparray[rollupindex].checkedfee = flightoptions.routes[d].opt[e].checkedfee;
                          rollupindex = rollupindex + 1;
                     }
                  }
               rolluparray.sort(function(a,b){return a.totalcost - b.totalcost});
               console.log(JSON.stringify(rolluparray));
        } else {
                   alert('Destination search was not successful for the following reason: ' + status2);
               }
        //end of the second (destination) geocoder 
        });     
  } else {
       alert('Origin search was not successful for the following reason: ' + status);
    }
   //end of the first (origin) geocoder
   });
//end of function searchandcompare  
}
  function findairports(num1,num2,list){
     var i;
     var areaports = [];
     for(i=0; i<list.length; i++) {
        if (distance(num1,num2,list[i].lat,list[i].lng) < 100){
           areaports.push(list[i]);
        } 
     }
     return areaports;
  }
  
  function distance(lat1, lon1, lat2, lon2){
    //Haversine formula from http://www.movable-type.co.uk/scripts/latlong.html
    var R = 6371e3; // metres
    var φ1 = lat1*0.0174533;
    var φ2 = lat2*0.0174533;
    var Δφ = (lat2-lat1)*0.0174533;
    var Δλ = (lon2-lon1)*0.0174533;

    var a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
            Math.cos(φ1) * Math.cos(φ2) *
            Math.sin(Δλ/2) * Math.sin(Δλ/2);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

    var d = R * c;
    var dist = d/1609.34;
    return dist;
  }
    
    function ubercost(startlat,startlng,endlat,endlng){
     var url = 'https://api.uber.com/v1/estimates/price?server_token=K8rh0YGXPtdHEFJepmOT-DsWT6_CcplY69BOhu7F';
      var stla = '&start_latitude=' + startlat.toString();
      var stln = '&start_longitude=' + startlng.toString();
      var enla = '&end_latitude=' + endlat.toString();
      var enln = '&end_longitude=' + endlng.toString();
      url = url + stla + stln + enla + enln;
      var response;
      var uberXavgpreSurge = 0.0;
      var uberXavgpostSurge = 0.0;
      
      var xub = new XMLHttpRequest();
      xub.open('GET', url, false);
      xub.onreadystatechange = function () {
          if (xub.readyState == 4 && xub.status == "200") {
                   response = JSON.parse(xub.responseText);
                   var k;
                   for (k = 0; k < response.prices.length; k++){
                     if (response.prices[k].display_name == "uberX") {
                        uberXavgpreSurge = (response.prices[k].low_estimate + response.prices[k].high_estimate)/2
                        uberXavgpostSurge = uberXavgpreSurge / response.prices[k].surge_multiplier;
                        console.log(response.prices[k].surge_multiplier);
                     }
                  } 
                   
          } else {
                   alert("Uber Price Search Failed");
               }
       }
       xub.setRequestHeader("Authorization", "Token K8rh0YGXPtdHEFJepmOT-DsWT6_CcplY69BOhu7F");
       xub.send();
       return(uberXavgpostSurge);
     }
     
    function flightsearch(ognapt,dstapt,flightday){
     var myjson = {};
     var mystr = "";
     myjson.request = {};
     myjson.request.slice = [];
     myjson.request.slice[0] = {};
     myjson.request.passengers = {};
     myjson.request.slice[0].origin = ognapt;
     myjson.request.slice[0].destination = dstapt;
     myjson.request.slice[0].date = flightday;
     myjson.request.passengers.adultCount = 1;
     myjson.request.passengers.infantInLapCount = 0;
     myjson.request.passengers.infantInSeatCount = 0;
     myjson.request.passengers.childCount = 0;
     myjson.request.passengers.seniorCount = 0;
     myjson.request.solutions = 10;
     myjson.request.refundable = false;
     mystr = JSON.stringify(myjson);
    
    var xhr = new XMLHttpRequest();
    var flighturl = "https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyBDPcpkXlwpVY7G4yr0v_sshszmUKmASP4";
    var routesum = {};
    routesum.dept = ognapt;
    routesum.arrv = dstapt;
    routesum.opt = [];
    xhr.onreadystatechange=function() {
        if (this.readyState == 4 && this.status == 200) {
            var jsonobj = JSON.parse(this.responseText);
            for (var n=0; n<jsonobj.trips.tripOption.length; n++){
                routesum.opt[n] = {};
                var res = jsonobj.trips.tripOption[n].saleTotal.split("USD");
                routesum.opt[n].price = Number(res[1]);
                routesum.opt[n].duration = jsonobj.trips.tripOption[n].slice[0].duration;
                routesum.opt[n].layovers = jsonobj.trips.tripOption[n].slice[0].segment.length - 1;
                routesum.opt[n].flights = [];
                var numseg = jsonobj.trips.tripOption[n].slice[0].segment.length;
                for (var p=0; p<numseg; p++){
                   routesum.opt[n].flights[p] = jsonobj.trips.tripOption[n].slice[0].segment[p].flight.carrier + " " + jsonobj.trips.tripOption[n].slice[0].segment[p].flight.number;
                }
                routesum.opt[n].depart = jsonobj.trips.tripOption[n].slice[0].segment[0].leg[0].departureTime;
                var lastleg = jsonobj.trips.tripOption[n].slice[0].segment[(numseg-1)].leg.length - 1;
                routesum.opt[n].arrive = jsonobj.trips.tripOption[n].slice[0].segment[(numseg-1)].leg[lastleg].arrivalTime;
            }
        }
    }
    xhr.open('POST', flighturl, false);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.send(mystr);
    return routesum; 
  }*/
      
</script>
  
  
</body>
 
</html>
