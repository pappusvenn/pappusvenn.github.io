<!DOCTYPE html>
<html>
 
<head>
  <meta charset="utf-8">
  <title>TrueCost Flight Search</title>
  <link href="http://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

  <!-- Javascript to establish the datepicker -->
  <script>
     $(function() {
        $( "#datepicker-1" ).datepicker();
     });
  </script>
</head>
 
<body>
 <h1> TrueCost Flight Search</h1>
 <p>Origin Address (Street, City, State): <input type="text" id="originadd"></p>
 <p>Destination Address (Street, City, State): <input type="text" id="destadd"></p>
 <p>Enter Date: <input type="text" id="datepicker-1"></p>
 <input type="button" id="compare-flights" value="Search">
 <div id="supercool"></div>
 
  <script>
    document.getElementById('compare-flights').addEventListener('click',function(){
         searchandcompare();
    });
    

  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
  xobj.open('GET', 'airports.json', true); // Replace 'my_data' with the path to your file
  xobj.onreadystatechange = function () {
  if (xobj.readyState == 4 && xobj.status == "200") {
     // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            loadairports(xobj.responseText);
    }
  };
    xobj.send(null);  
    

    
    function loadairports(response) {
       alert("Just checking");
       var listo = JSON.parse(response);
       var i;
       var out = "<table>";
       for (i=0; i<listo.airports.length; i++){
         out += "<tr><td>" + listo.airports[i].code + "</td><td>" + listo.airports[i].lat + "</td><td>" + listo.airports[i].lng + "</td><tr>";
       }
    }
    document.getElementById("supercool").innerHTML = out;
    
    
    function searchandcompare(){
     alert("Holy shit");
    //'var xhr = new XMLHttpRequest();
    //'var url = "https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyBDPcpkXlwpVY7G4yr0v_sshszmUKmASP4";
    
    //'xhr.onreadystatechange=function() {
    //'if (this.readyState == 4 && this.status == 200) {
     //   'myFunction(this.responseText);
    //''}
     //''}
    
    // 'xhr.open('POST', url, true);
     //'xhr.setRequestHeader("Content-Type", "application/json");
     //'xhr.send('{"request": {"slice": [{"origin": "DFW","destination": "SFO","date": "2016-09-23"}],"passengers": {"adultCount": 1,"infantInLapCount": 0,"infantInSeatCount": 0,"childCount": 0,"seniorCount": 0},"solutions": 20,"refundable": false}}');
     

    //'function myFunction(response) {
     //var arr = JSON.parse(response);
     //var apt = arr.trips.tripOption[0].saleTotal;
     //var i;
     //var out = response;

    //for(i = 0; i < arr.trips.tripOption.length; i++) {
    //   out += "<tr><td>" +
    //   arr.trips.tripOption[i].slice[0].segment[0].flight.carrier +
    //   "</td><td>" +
     //  arr.trips.tripOption[i].slice[0].segment[0].flight.number +
    //   "</td><td>" +
    //   arr.trips.tripOption[i].slice[0].segment[0].leg[0].origin +
    //   "</td><td>" +       
    //   arr.trips.tripOption[i].slice[0].segment[0].leg[0].departureTime +
    //   "</td><td>" +
    //   arr.trips.tripOption[i].slice[0].segment[0].leg[0].destination +
    //   "</td><td>" + 
    //   arr.trips.tripOption[i].slice[0].segment[0].leg[0].arrivalTime +
    //  "</td><td>" +      
    //   arr.trips.tripOption[i].saleTotal +
    //   "</td></tr>";
   // }
    //out += "</table>";
    
     
    }  
      
  </script>
  
  
</body>
 
</html>
